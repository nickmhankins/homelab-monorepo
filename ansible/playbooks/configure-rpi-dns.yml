---
- name: Configure pihole dns servers
  hosts: dns
  become: true
  remote_user: almalinux
  gather_facts: false
  tasks:
    - name: Install pihole
      include_role:
        name: pihole
      vars:
        password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30366330633038643234613932656162306332353730636662306330366333643235326634373664
          3134373038323430316634643734663830643533326333320a646162343138336133366263626534
          65303265666236373735376231373865353266366638306164363935313536663338393666366635
          3739663430353334650a303065353464303863656432346566333238343131636463323537613861
          6331

- name: Configure dns replication
  hosts: primary_pihole
  become: true
  remote_user: almalinux
  gather_facts: false
  tasks:
    - name: Add orbitalsync role
      include_role:
        name: orbitalsync
      vars:
        primary_host: 10.0.10.3:81
        secondary_host: 10.0.10.4:81
        password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30366330633038643234613932656162306332353730636662306330366333643235326634373664
          3134373038323430316634643734663830643533326333320a646162343138336133366263626534
          65303265666236373735376231373865353266366638306164363935313536663338393666366635
          3739663430353334650a303065353464303863656432346566333238343131636463323537613861
          6331
